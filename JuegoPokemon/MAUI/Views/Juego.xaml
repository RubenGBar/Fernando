<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:vm="clr-namespace:MAUI.VM" 
             x:Class="MAUI.Views.Juego"
             Title="Juego">

    <ContentPage.BindingContext>
        <vm:Partida />
    </ContentPage.BindingContext>

    <Grid RowDefinitions="Auto,*,Auto"
          Padding="10">

        <Grid ColumnDefinitions="*,*,*"
              RowSpacing="0"
              ColumnSpacing="0"
              Row="0"
              BackgroundColor="Black"
              Padding="10">
            <StackLayout HorizontalOptions="Center">
                <Label Text="Tiempo"
                       TextColor="White"
                       FontAttributes="Bold"
                       HorizontalOptions="Center" />
                <Label Text="{Binding PreguntaActual.Tiempo}"
                       TextColor="White"
                       HorizontalOptions="Center" />
            </StackLayout>

            <StackLayout Grid.Column="1" HorizontalOptions="Center">
                <Label Text="Ronda"
                       TextColor="White"
                       FontAttributes="Bold"
                       HorizontalOptions="Center" />
                <Label Text="{Binding Ronda}"
                       TextColor="White"
                       HorizontalOptions="Center" />
            </StackLayout>

            <StackLayout Grid.Column="2" HorizontalOptions="Center">
                <Label Text="Puntos"
                       TextColor="White"
                       FontAttributes="Bold"
                       HorizontalOptions="Center" />
                <Label Text="{Binding Puntos}"
                       TextColor="White"
                       HorizontalOptions="Center" />
            </StackLayout>
        </Grid>

        <!-- Cuerpo de juego -->
        <StackLayout Grid.Row="1"
                     VerticalOptions="Center"
                     Spacing="20">

            <Label Text="{Binding PreguntaActual.PokemonAdivinar.Nombre}"
                   FontAttributes="Bold"
                   FontSize="24"
                   HorizontalOptions="Center" />

            <CollectionView ItemsSource="{Binding PreguntaActual.PokemonClickables}"
                            SelectionMode="Single"
                            x:Name="cvPokemons">
                <CollectionView.ItemsLayout>
                    <GridItemsLayout Orientation="Vertical"
                                     Span="2"
                                     VerticalItemSpacing="10"
                                     HorizontalItemSpacing="10"/>
                </CollectionView.ItemsLayout>
                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <Image Source="{Binding Foto}"
                               HeightRequest="100"
                               WidthRequest="100"
                               Aspect="AspectFit"
                               BackgroundColor="LightGray"/>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>

        </StackLayout>

    </Grid>

</ContentPage>